---

variables:
# Suitesparse, as installed with Debian, is thread-parallel using OpenMP.
# OpenMP silently assumes, it can spawn as many threads as there are cores.
# In a worst case scenario, this leads to a number of threads quadratic in
# the core count, if you also do parallel test execution with the maximum
# number of cores. We solve the issue by disallowing OpenMP to allocate more
# than one thread.
  OMP_NUM_THREADS: 1
  # we vendor {fmt}, so there is now a submodule
  GIT_SUBMODULE_STRATEGY: normal

debian:10--gcc-17:
  image: registry.dune-project.org/docker/ci/dune-pdelab-deps:git-debian-10-gcc-8-noassert-17
  script: duneci-standard-test
  tags:
    - "cores:4"
    - "mem:16G"

debian:10--clang-17:
  image: registry.dune-project.org/docker/ci/dune-pdelab-deps:git-debian-10-clang-7-libcpp-17
  script: duneci-standard-test
  tags:
    - "cores:4"
    - "mem:16G"
